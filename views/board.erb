<script src="/javascripts/players.js"></script>
<script src="/javascripts/moves.js"></script>
<script src="/javascripts/board.js"></script>
<script src="/javascripts/game.js"></script>

<div id="moves"></div>
<div id="players">
  <div>
    White:
    <span id="playerw"></span>
  </div>
  <div>
    Black:
    <span id="playerb"></span>
  </div>
</div>
<table id="board">
  <% 10.times do |i| %>
    <tr>
      <% 10.times do |u| %>
        <td class="<%= (i+u) % 2 == 0 ? 'dark' : 'light' %>" id="cell<%= "0#{i}"[0..1] %><%= "0#{u}"[0..1] %>"></td>
      <% end %>
    </tr>
  <% end %>
</table>

<script>
  Event.observe(window, 'load', function () {
    board.state = <%= @game.state.to_json %>;
    moves.movesArray = <%= @game.moves.to_json %>;
    players.info = $A(<%= @game.players.keys.to_json %>);
    players.myColor = <%=   @player = @game.players.find { |k, v| v == identifier }.to_a[0].to_json %>;
    game.setup();
  });
</script>
