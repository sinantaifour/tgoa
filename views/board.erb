<script src="/javascripts/moves.js"></script>
<script src="/javascripts/board.js"></script>
<script src="/javascripts/game.js"></script>
<script src="/javascripts/user.js"></script>

<div id="moves"></div>
<div id="players">
  <div>
    White
    <span id="playerWhite"></span>
  </div>
  <div>
    Black
    <span id="playerBlack"></span>
  </div>
</div>
<table id="board">
  <% 10.times do |i| %>
    <tr>
      <% 10.times do |u| %>
        <td class="<%= (i+u) % 2 == 0 ? 'dark' : 'light' %>" id="cell<%= "0#{i}"[0..1] %><%= "0#{u}"[0..1] %>"></td>
      <% end %>
    </tr>
  <% end %>
</table>

<div>
  <% if @player %>
    <p> You play : <%= @player == "w" ? "White" : "Black" %> </p>
  <% else %>
    You are a viewer
  <% end %>
  <p id="turnLabel"> </p>
</div>

<script>
  Event.observe(window, 'load', function () {
    board.state = <%= @game.state.to_json %>;
    moves.movesArray = <%= @game.moves.to_json %>;
    game.setup();
    <% if @player %>
      User.color = "<%= @player %>";
    <% end %>
  });
</script>
